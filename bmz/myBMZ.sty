% ==================================================================
% FILE     myBMZ.sty
% MACHINE  all
% INFO     common bmz stuff
%
% DATE     11.11.2018
% OWNER    Bischofberger
% ==================================================================

\ProvidesPackage{myBMZ}

\RequirePackage{basicMacrosLT}

% change globally to ]a,b[ intervalls here...
\RequirePackage{interval}
\intervalconfig{soft open fences, separator symbol={;}}

% BMZ
\newcommand*{\BMZ}{B\kern0.10em M\kern0.07em S Zürich}

% include all BMZ-Theorie subfolders (for pdf inclusion)
\def\@TheoriePath{$HOME/Documents/Work/BMS-ZH/01-Unterricht/02-Theorie}
\newcommand*{\includeBMZTheorieGraphicspath}{%
  \graphicspath{%
      {\@TheoriePath/01-Arithmetik-Algebra/01-Algebra/}%
      {\@TheoriePath/01-Arithmetik-Algebra/02-Potenzen/}%
      {\@TheoriePath/02-Gleichungen/01-Lineare-Gleichungen/}%
      {\@TheoriePath/02-Gleichungen/02-Lineare-Gleichungssyssteme/}%
      {\@TheoriePath/02-Gleichungen/03-Quadratische-Gleichungen/}%
      {\@TheoriePath/02-Gleichungen/04-Nichtlineare-Gleichungen/}%
      {\@TheoriePath/03-Funktionen/01-Funktionen/}%
      {\@TheoriePath/03-Funktionen/02-Lineare-Funktionen/}%
      {\@TheoriePath/03-Funktionen/03-Quadratische-Funktionen/}%
      {\@TheoriePath/03-Funktionen/04-Potenzfunktionen/}%
      {\@TheoriePath/03-Funktionen/05-Polynomfunktionen/}%
      {\@TheoriePath/03-Funktionen/06-Exponentialfunktionen/}%
      {\@TheoriePath/05-Geometrie/01-PlanimetrieI/}%
      {\@TheoriePath/05-Geometrie/02-PlanimetrieII/}%
      {\@TheoriePath/05-Geometrie/03-TrigonometrieI/}%
      {\@TheoriePath/05-Geometrie/04-TrigonometrieII/}%
      {\@TheoriePath/05-Geometrie/05-Stereometrie/}%
      {\@TheoriePath/05-Geometrie/06-Vektorgeometrie/}%
    }
}

% Frommenwiler Aufgabenliste
% Muss hier bewusst ohne tabularx implementiert werden (tabularx würde environ package 
% voraussetzen). Die Kolonnenbreiten werden vorab berechnet.
\newlength\FColWidth
\setlength\FColWidth{\dimexpr(\textwidth-12mm)/2-3\tabcolsep\relax}
\NewDocumentEnvironment{Frommenwiler}{ O{Lösen Sie die folgenden Aufgaben aus Frommenwiler.} }
{%
  \begin{Aufg}
    #1\par\nopagebreak
    \vskip .5ex
    \begin{tabular}{p{\FColWidth}p{12mm}p{\FColWidth}}
      \toprule
      Aufgabe & Seite & Bemerkungen\\
      \midrule
}{%
      \bottomrule
    \end{tabular}
  \end{Aufg}
}

% HP Prime environment
\RequirePackage{marginnote}
\NewDocumentEnvironment{TR}{ O{} }
{%
  \par\SpaceAbove\BZ
  \begin{minipage}[t]{\linewidth}
    \marginnote{\includegraphics[width=12mm]{HP-Prime.png}}[2ex]
    \begin{mdframed}[linewidth=0pt, backgroundcolor=gray!40]
      {\bfseries\sffamily TR: #1}\par
}{%
    \end{mdframed}%
    \vskip 0pt  % This is a hack, since "skipbelow" of mdframed is broken.
  \end{minipage}%
  \SpaceBelow
}

% Calculator keys
\newcommand*{\Keys}[1]{\fbox{\texttt{#1}}}
\newcommand*{\BKeys}[1]{\colorbox{black}{\color{white}\texttt{#1}}}

