% ==================================================================
% FILE     basicMathDocStyle.sty
% MACHINE  all
% INFO     Preamble für Mathe-Aufgabenblätter usw.
%          basicDocumentStyle muss zuerst geladen werden
%
% DATE     24.01.2016
% OWNER    Bischofberger
% ==================================================================

\ProvidesPackage{basicMathDocStyle}

% math packages
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{bm}

% various math options
\DeclarePairedDelimiter\abs{\lvert}{\rvert}  % mathtools: abs*{...} command
\allowdisplaybreaks

% math theorems
\newtheoremstyle{MyStyle}
{0em}						% space above
{0em}						% space below
{}							% body font
{}							% indent amount
{\bfseries}			% Theorem head font
{.}							% punctuation after theorem head
{.5em}					% space after theorem head
{\thmname{#1}}	% theorem head spec

\theoremstyle{MyStyle}
\newtheorem{Def}{Definition}
\newtheorem{Bsp}{Beispiel}
\newtheorem{Bem}{Bemerkung}

% drawings
\usepackage{tikz}
\usepackage{tikzStyle}

% frames
\usepackage[framemethod=tikz]{mdframed}

% ----------------------------------------------------------------
% custom commands and environments...
% ----------------------------------------------------------------
% "environ"-package für verschachtelte Umgebungen innerhalb neuer Umgebung
\usepackage{environ}

% Notizpapier.
% - Berechnet optimale Häuschengrösse (+- 4mm) und Anzahl Häuschen, 
%   um \linewidth aufzufüllen.
% - Argument: Anzahl Reihen (= vertikale Höhe)
\newcommand{\Notes}[1]{
  \par\vspace{.5em}
  \begin{tikzpicture}[scale=1]
    \pgfmathparse{\linewidth - \pgflinewidth}
    \xdef\myLineWidth{\pgfmathresult}  % correct width without line caps
    \pgfmathparse{\myLineWidth / int(\myLineWidth/4mm)}
    \xdef\sizeOfSquares{\pgfmathresult}  % +- 4mm square size
    \draw [line cap=rect, step=\sizeOfSquares pt, gray!50!, thin] 
      (0,0) grid (\myLineWidth pt, {#1 * \sizeOfSquares pt});
\end{tikzpicture}}

% Lineare Gleichungssysteme
\NewEnviron{EQ}
{
  \begin{align*}
    \left|
    \begin{array}{rcrcrcrcrcrcrcrcrcrcrc}
      \BODY
    \end{array}
    \right|
  \end{align*}
}

% Umgebung "Aufgabe", mit und ohne Label für Lösungen.
\newcounter{excounter}
\renewcommand{\theexcounter}{\arabic{excounter}}
\newenvironment{AufgLsg}[1]{
  \refstepcounter{excounter}
  \label{#1}
  %\BZ
  \noindent\textbf{Aufgabe~\theexcounter$^{\bm{L}}$\enspace}}
{\par\addvspace{0em}}

\newenvironment{Aufg}[0]{
  \refstepcounter{excounter}
  %\BZ
  \noindent\textbf{Aufgabe~\theexcounter\enspace}}
{\par\addvspace{0em}}

\newenvironment{Aufg*}[0]{
  \refstepcounter{excounter}
  %\BZ
  \noindent\textbf{Aufgabe~\theexcounter*\enspace}}
{\par\addvspace{0em}}

% Lösung einer einzelnen Aufgabe.
% Wird in \begin{Lsg} -- \end{Lsg} eingebettet
\newenvironment{LsgAufg}[1]{
  \textbf{Aufg. \ref{#1} }}
{\par\addvspace{.5em}}

% Definiton mit grauem Rand
\NewEnviron{FrameDef}
{
  \begin{mdframed}[linecolor=gray!40!,linewidth=2pt,innertopmargin=1pt,innerbottommargin=\topskip]
    \BZ
    \begin{Def}
      \BODY
    \end{Def}
  \end{mdframed}
}

