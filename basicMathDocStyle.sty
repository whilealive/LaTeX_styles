% ==================================================================
% FILE     basicMathDocStyle.sty
% MACHINE  all
% INFO     Preamble für Mathe-Aufgabenblätter usw.
%          basicDocumentStyle muss zuerst geladen werden
%
% DATE     12.04.2016
% OWNER    Bischofberger
% ==================================================================

\ProvidesPackage{basicMathDocStyle}

% math packages
\RequirePackage{mathtools}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{bm}

% various math options
\DeclarePairedDelimiter\abs{\lvert}{\rvert}  % mathtools: abs*{...} command
\allowdisplaybreaks

% math theorems
\newtheoremstyle{MyStyle}
{\baselineskip}	 % space above
{\baselineskip}	 % space below
{}							 % body font
{}							 % indent amount
{\bfseries}			 % Theorem head font
{.}							 % punctuation after theorem head
{.5em}					 % space after theorem head
{\thmname{#1}}	 % theorem head spec

\theoremstyle{MyStyle}
\newtheorem{Def}{Definition}
\newtheorem{Bsp}{Beispiel}
\newtheorem{Bem}{Bemerkung}

% drawings
\RequirePackage{tikz}
\RequirePackage{tikzStyle}

% frames
\RequirePackage[framemethod=tikz]{mdframed}

% ----------------------------------------------------------------
% custom commands and environments...
% ----------------------------------------------------------------
% "environ"-package für verschachtelte Umgebungen innerhalb neuer Umgebung
\RequirePackage{environ}

% Notizpapier.
% - Berechnet optimale Häuschengrösse (+- 4mm) und Anzahl Häuschen, 
%   um \linewidth aufzufüllen.
% - Argument: Anzahl Reihen (= vertikale Höhe)
\newcommand{\Notes}[1]{
  \par\vspace{.5\baselineskip}
  \begin{tikzpicture}[scale=1]
    \pgfmathparse{\linewidth - \pgflinewidth}
    \xdef\myLineWidth{\pgfmathresult}  % correct width without line caps
    \pgfmathparse{\myLineWidth / int(\myLineWidth/4mm)}
    \xdef\sizeOfSquares{\pgfmathresult}  % +- 4mm square size
    \draw [line cap=rect, step=\sizeOfSquares pt, gray!50!, thin] 
      (0,0) grid (\myLineWidth pt, {#1 * \sizeOfSquares pt});
\end{tikzpicture}}

% Umgebung "Aufgabe", mit und ohne Label für Lösungen.
\newcounter{excounter}
\renewcommand{\theexcounter}{\arabic{excounter}}
\newenvironment{AufgLsg}[1]{
  \refstepcounter{excounter}
  \label{#1}
  \noindent\textbf{Aufgabe~\theexcounter$^{\bm{L}}$\enspace}}
{\par\addvspace{\baselineskip}}

\newenvironment{Aufg}[0]{
  \refstepcounter{excounter}
  \noindent\textbf{Aufgabe~\theexcounter\enspace}}
{\par\addvspace{\baselineskip}}

\newenvironment{Aufg*}[0]{
  \refstepcounter{excounter}
  \noindent\textbf{Aufgabe~\theexcounter*\enspace}}
{\par\addvspace{\baselineskip}}

% Lösung einer einzelnen Aufgabe.
\newenvironment{LsgAufg}[1]{
  \textbf{Aufg. \ref{#1} }}
{\par\addvspace{.5\baselineskip}}

% Definiton mit grauem Rand
\NewEnviron{FrameDef}
{
  \begin{mdframed}[nobreak,linecolor=gray!40!,linewidth=2pt,innertopmargin=1pt,innerbottommargin=\topskip]
    \begin{Def}
      \BODY
    \end{Def}
  \end{mdframed}
}

% Doppelt unterstrichen
\newcommand{\Result}[1]{\underline{\underline{#1}}}

