% ==================================================================
% FILE     basicMathDocStyle.sty
% MACHINE  all
% INFO     Preamble for my math documents
%
% DATE     06.11.2016
% OWNER    Bischofberger
% ==================================================================

\ProvidesPackage{basicMathDocStyle}

% depends on my basic style
\RequirePackage{basicDocumentStyle}

% math packages
\RequirePackage{mathtools}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{bm}

% units
\RequirePackage{siunitx}
\sisetup{per-mode=symbol}

% amsmath options
\allowdisplaybreaks

% mathtools stuff
\DeclarePairedDelimiter\abs{\lvert}{\rvert}  % mathtools: abs*{...} command

% math theorems --------
% {#1}: space above
% {#2}: space below
% {#3}: body font
% {#4}: indent amount
% {#5}: Theorem head font
% {#6}: punctuation after theorem head
% {#7}: space after theorem head
% {#8}: theorem head spec
\newtheoremstyle{MyStyle}{\baselineskip}{\baselineskip}{}{}{\bfseries}{.}{.5em}{\thmname{#1}}
\theoremstyle{MyStyle}
\newtheorem{Def}{Definition}
\newtheorem{Bsp}{Beispiel}
\newtheorem{Bem}{Bemerkung}

% drawings
\RequirePackage{tikzStyle}

% frames
\RequirePackage[framemethod=tikz]{mdframed}

% exercise enumerations (loads environ)
\RequirePackage{tasks}

% alphanumeric enumerations for exercises
% -> deprecated (to be replaced by tasks)!!!
%\newlist{enumerateAlph}{enumerate}{1}   % enumerate with label=\alph) and (really) no left indent
%\newlist{enumerateAlph*}{enumerate*}{1} 
%\setlist[enumerateAlph,1]{label=\alph*),labelindent=-0.3em}
%\setlist[enumerateAlph*,1]{label=\alph*),itemjoin=\quad}


% ----------------------------------------------------------------
% custom commands and environments...
% ----------------------------------------------------------------
% double underline for end results
\newcommand*{\Result}[1]{\underline{\underline{#1}}}
\newcommand*\bigfrac{\genfrac{}{}{1pt}{0}}   % nested fractions

% sets and constants
\newcommand*{\N}{\mathbb{N}}
\newcommand*{\Z}{\mathbb{Z}}
\newcommand*{\Q}{\mathbb{Q}}
\newcommand*{\R}{\mathbb{R}}
\newcommand*{\C}{\mathbb{C}}
\newcommand*{\Euler}{e}
\newcommand*{\Complex}{i}
\newcommand*{\GGT}{\mathrm{ggT}}
\newcommand*{\KGV}{\mathrm{kgV}}
\newcommand*{\D}[1]{\mathrm{d}#1}  % dx

% Notizpapier.
% - Berechnet optimale Häuschengrösse (+- 4mm) und Anzahl Häuschen, 
%   um \linewidth aufzufüllen.
% - Argument: Anzahl Reihen (= vertikale Höhe)
% TODO: auffüllen bis Seitenende
\newcommand*{\Notes}[1]{%
  \BZ[.5]%
  \begin{tikzpicture}[scale=1]
    \pgfmathparse{\linewidth - \pgflinewidth}%
    \xdef\myLineWidth{\pgfmathresult}% correct width without line caps
    \pgfmathparse{\myLineWidth / int(\myLineWidth/4mm)}%
    \xdef\sizeOfSquares{\pgfmathresult}% +- 4mm square size
    \draw [line cap=rect, step=\sizeOfSquares pt, gray!50!, thin] 
      (0,0) grid (\myLineWidth pt, {#1 * \sizeOfSquares pt});
  \end{tikzpicture}%
}

% Definiton mit grauem Rand
\NewEnviron{FrameDef}
{
  \begin{mdframed}[nobreak,linecolor=gray!40!,linewidth=2pt,innertopmargin=1pt,innerbottommargin=\topskip]
    \begin{Def}
      \BODY
    \end{Def}
  \end{mdframed}
}

% ----------------------------------------------------------------
% all about Exercises...
\newcounter{excounter}
\renewcommand*{\theexcounter}{\arabic{excounter}}

\newenvironment{AufgLsg}[1]{% adds label for solution -> see LsgAufg
  \refstepcounter{excounter}%
  \label{#1}%
  \noindent\textbf{Aufgabe~\theexcounter$^{\bm{L}}$\enspace}%
}{%
  \par\addvspace{\baselineskip}%
}

\newenvironment{Aufg}[1][\theexcounter]{% normal
  \ifx\theexcounter#1\refstepcounter{excounter}\fi%
  \noindent\textbf{Aufgabe~#1\enspace}%
}{%
  \par\addvspace{\baselineskip}%
}

\newenvironment{Aufg*}[1][\theexcounter]{% difficult
  \ifx\theexcounter#1\refstepcounter{excounter}\fi%
  \noindent\textbf{Aufgabe~#1*\enspace}%
}{%
  \par\addvspace{\baselineskip}%
}

% Lösung einer einzelnen Aufgabe.
\newenvironment{LsgAufg}[1]{%
  \textbf{Aufg. \ref{#1} }%
}{%
  \par\addvspace{.5\baselineskip}%
}
% ----------------------------------------------------------------

